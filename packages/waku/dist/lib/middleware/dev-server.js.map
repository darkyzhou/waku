{"version":3,"sources":["../../../src/lib/middleware/dev-server.ts"],"sourcesContent":["import type { Middleware } from './types.js';\n\ndeclare global {\n  interface ImportMeta {\n    readonly env: Record<string, string>;\n  }\n}\n\nconst DO_NOT_BUNDLE = '';\n\nexport const devServer: Middleware = (options) => {\n  if (import.meta.env && import.meta.env.MODE === 'production') {\n    // pass through\n    return (_ctx, next) => next();\n  }\n  const devServerImplPromise = import(\n    /* @vite-ignore */ DO_NOT_BUNDLE + './dev-server-impl.js'\n  ).then(({ devServer }) => devServer(options));\n  return async (ctx, next) => {\n    const devServerImpl = await devServerImplPromise;\n    return devServerImpl(ctx, next);\n  };\n};\n"],"names":["DO_NOT_BUNDLE","devServer","options","env","MODE","_ctx","next","devServerImplPromise","then","ctx","devServerImpl"],"mappings":"AAQA,MAAMA,gBAAgB;AAEtB,OAAO,MAAMC,YAAwB,CAACC;IACpC,IAAI,YAAYC,GAAG,IAAI,YAAYA,GAAG,CAACC,IAAI,KAAK,cAAc;QAC5D,eAAe;QACf,OAAO,CAACC,MAAMC,OAASA;IACzB;IACA,MAAMC,uBAAuB,MAAM,CACjC,gBAAgB,GAAGP,gBAAgB,wBACnCQ,IAAI,CAAC,CAAC,EAAEP,SAAS,EAAE,GAAKA,UAAUC;IACpC,OAAO,OAAOO,KAAKH;QACjB,MAAMI,gBAAgB,MAAMH;QAC5B,OAAOG,cAAcD,KAAKH;IAC5B;AACF,EAAE"}