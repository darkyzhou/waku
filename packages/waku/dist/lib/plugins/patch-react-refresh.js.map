{"version":3,"sources":["../../../src/lib/plugins/patch-react-refresh.ts"],"sourcesContent":["import type { Plugin, PluginOption } from 'vite';\n\nexport const patchReactRefresh = <T extends PluginOption[]>(options: T): T =>\n  options.map((option) => {\n    const plugin = option as Plugin;\n    const origTransformIndexHtml = plugin?.transformIndexHtml;\n    if (\n      plugin?.name === 'vite:react-refresh' &&\n      typeof origTransformIndexHtml === 'function'\n    ) {\n      return {\n        ...option,\n        transformIndexHtml(...args) {\n          const result = origTransformIndexHtml(...args);\n          if (Array.isArray(result)) {\n            return result.map((item) => ({\n              ...item,\n              attrs: { ...item.attrs, async: true },\n            }));\n          }\n          return result;\n        },\n      };\n    }\n    return option;\n  }) as T;\n"],"names":["patchReactRefresh","options","map","option","plugin","origTransformIndexHtml","transformIndexHtml","name","args","result","Array","isArray","item","attrs","async"],"mappings":"AAEA,OAAO,MAAMA,oBAAoB,CAA2BC,UAC1DA,QAAQC,GAAG,CAAC,CAACC;QACX,MAAMC,SAASD;QACf,MAAME,yBAAyBD,QAAQE;QACvC,IACEF,QAAQG,SAAS,wBACjB,OAAOF,2BAA2B,YAClC;YACA,OAAO;gBACL,GAAGF,MAAM;gBACTG,oBAAmB,GAAGE,IAAI;oBACxB,MAAMC,SAASJ,0BAA0BG;oBACzC,IAAIE,MAAMC,OAAO,CAACF,SAAS;wBACzB,OAAOA,OAAOP,GAAG,CAAC,CAACU,OAAU,CAAA;gCAC3B,GAAGA,IAAI;gCACPC,OAAO;oCAAE,GAAGD,KAAKC,KAAK;oCAAEC,OAAO;gCAAK;4BACtC,CAAA;oBACF;oBACA,OAAOL;gBACT;YACF;QACF;QACA,OAAON;IACT,GAAQ"}