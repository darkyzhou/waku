{"version":3,"sources":["../../../src/lib/plugins/vite-plugin-nonjs-resolve.ts"],"sourcesContent":["import type { Plugin } from 'vite';\n\nimport { EXTENSIONS } from '../builder/constants.js';\nimport { extname } from '../utils/path.js';\n\nexport function nonjsResolvePlugin(): Plugin {\n  return {\n    name: 'nonjs-resolve-plugin',\n    async resolveId(id, importer, options) {\n      if (id.endsWith('.js')) {\n        for (const ext of EXTENSIONS) {\n          const resolved = await this.resolve(\n            id.slice(0, -extname(id).length) + ext,\n            importer,\n            options,\n          );\n          if (resolved) {\n            return resolved;\n          }\n        }\n      }\n    },\n  };\n}\n"],"names":["EXTENSIONS","extname","nonjsResolvePlugin","name","resolveId","id","importer","options","endsWith","ext","resolved","resolve","slice","length"],"mappings":"AAEA,SAASA,UAAU,QAAQ,0BAA0B;AACrD,SAASC,OAAO,QAAQ,mBAAmB;AAE3C,OAAO,SAASC;IACd,OAAO;QACLC,MAAM;QACN,MAAMC,WAAUC,EAAE,EAAEC,QAAQ,EAAEC,OAAO;YACnC,IAAIF,GAAGG,QAAQ,CAAC,QAAQ;gBACtB,KAAK,MAAMC,OAAOT,WAAY;oBAC5B,MAAMU,WAAW,MAAM,IAAI,CAACC,OAAO,CACjCN,GAAGO,KAAK,CAAC,GAAG,CAACX,QAAQI,IAAIQ,MAAM,IAAIJ,KACnCH,UACAC;oBAEF,IAAIG,UAAU;wBACZ,OAAOA;oBACT;gBACF;YACF;QACF;IACF;AACF"}